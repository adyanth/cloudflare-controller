---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.8.0
  creationTimestamp: null
  name: tunnelbindings.networking.cfargotunnel.com
spec:
  group: networking.cfargotunnel.com
  names:
    kind: TunnelBinding
    listKind: TunnelBindingList
    plural: tunnelbindings
    singular: tunnelbinding
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.hostnames
      name: FQDNs
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: TunnelBinding is the Schema for the tunnelbindings API
        properties:
          accessConfig:
            properties:
              accessPolicies:
                description: List of access policies
                items:
                  properties:
                    action:
                      type: string
                    exclude:
                      items:
                        type: string
                      type: array
                    include:
                      items:
                        type: string
                      type: array
                    name:
                      type: string
                    require:
                      items:
                        type: string
                      type: array
                  required:
                  - action
                  - exclude
                  - include
                  - name
                  - require
                  type: object
                type: array
              enabled:
                default: false
                description: Enable handling of access configuration
                type: boolean
              settings:
                description: Application settings
                properties:
                  additional:
                    description: Additional settings
                    properties:
                      browserRendering:
                        description: Cloudflare will render an SSH terminal or VNC
                          session for this application in a web browser. [ssh,vnc]
                        enum:
                        - ""
                        - vnc
                        - ssh
                        type: string
                    type: object
                  appearance:
                    description: Appearance settins
                    properties:
                      appLauncherVisibility:
                        default: true
                        description: Wether to show app in the launcher. Defaults
                          to true.
                        type: boolean
                      customLogo:
                        description: Custom logo url
                        type: string
                    type: object
                  authentication:
                    description: Authentication settins
                    properties:
                      allowedIdps:
                        description: The list of identiy providers which application
                          is allowed to use. If empty all idps are allowed
                        items:
                          type: string
                        type: array
                      customDenyMessage:
                        description: The custom error message shown to a user when
                          they are denied access to the application.
                        type: string
                      customDenyUrl:
                        description: The custom URL a user is redirected to when they
                          are denied access to the application.
                        type: string
                      instantAuth:
                        default: false
                        description: Skip identity provider selection if only one
                          is configured
                        type: boolean
                      sessionDuration:
                        default: 24h
                        description: 'The amount of time that tokens issued for this
                          application will be valid. Must be in the format 300ms or
                          2h45m. Valid time units are: ns, us (or Âµs), ms, s, m, h.'
                        type: string
                    type: object
                  cookies:
                    description: Cookie settings
                    properties:
                      enableBindingCookie:
                        default: false
                        description: Enables the binding cookie, which increases security
                          against compromised authorization tokens and CSRF attacks.
                        type: boolean
                      enableHttpOnly:
                        default: true
                        description: Enables the HttpOnly cookie attribute, which
                          increases security against XSS attacks.
                        type: boolean
                      sameSiteAttribute:
                        description: Sets the SameSite cookie setting, which provides
                          increased security against CSRF attacks. [none,strict,lax]
                        enum:
                        - ""
                        - none
                        - strict
                        - lax
                        type: string
                    type: object
                type: object
              type:
                default: self_hosted
                description: Application type self_hosted,saas
                enum:
                - ""
                - self_hosted
                - saas
                type: string
            type: object
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          status:
            description: TunnelBindingStatus defines the observed state of TunnelBinding
            properties:
              hostnames:
                description: To show on the kubectl cli
                type: string
              services:
                items:
                  description: ServiceInfo stores the Hostname and Target for each
                    service
                  properties:
                    hostname:
                      description: FQDN of the service
                      type: string
                    target:
                      description: Target for cloudflared
                      type: string
                  required:
                  - hostname
                  - target
                  type: object
                type: array
            required:
            - hostnames
            - services
            type: object
          subjects:
            items:
              description: TunnelBindingSubject defines the subject TunnelBinding
                connects to the Tunnel
              properties:
                kind:
                  default: Service
                  description: Kind can be Service
                  type: string
                name:
                  type: string
                spec:
                  properties:
                    caPool:
                      description: CaPool trusts the CA certificate referenced by
                        the key in the secret specified in tunnel.spec.originCaPool.
                        tls.crt is trusted globally and does not need to be specified.
                        Only useful if the protocol is HTTPS.
                      type: string
                    fqdn:
                      description: Fqdn specifies the DNS name to access this service
                        from. Defaults to the service.metadata.name + tunnel.spec.domain.
                        If specifying this, make sure to use the same domain that
                        the tunnel belongs to. This is not validated and used as provided
                      type: string
                    noTlsVerify:
                      default: false
                      description: NoTlsVerify disables TLS verification for this
                        service. Only useful if the protocol is HTTPS.
                      type: boolean
                    path:
                      description: Path specifies a regular expression for to match
                        on the request for http/https services If a rule does not
                        specify a path, all paths will be matched.
                      type: string
                    protocol:
                      description: Protocol specifies the protocol for the service.
                        Should be one of http, https, tcp, udp, ssh or rdp. Defaults
                        to http, with the exceptions of https for 443, smb for 139
                        and 445, rdp for 3389 and ssh for 22 if the service has a
                        TCP port. The only available option for a UDP port is udp,
                        which is default.
                      type: string
                    proxyAddress:
                      default: 127.0.0.1
                      description: ProxyAddress configures the listen address for
                        that proxy
                      pattern: ((^((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))$)|(^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$))
                      type: string
                    proxyPort:
                      default: 0
                      description: ProxyPort configures the listen port for that proxy
                      maximum: 65535
                      minimum: 0
                      type: integer
                    proxyType:
                      default: ""
                      description: ProxyType configures the proxy type.
                      enum:
                      - ""
                      - socks
                      type: string
                    target:
                      description: Target specified where the tunnel should proxy
                        to. Defaults to the form of <protocol>://<service.metadata.name>.<service.metadata.namespace>.svc:<port>
                      type: string
                  type: object
              required:
              - name
              type: object
            type: array
          tunnelRef:
            description: TunnelRef defines the Tunnel TunnelBinding connects to
            properties:
              disableDNSUpdates:
                description: DisableDNSUpdates disables the DNS updates on Cloudflare,
                  just managing the configs. Assumes the DNS entries are manually
                  added.
                type: boolean
              kind:
                description: Kind can be Tunnel or ClusterTunnel
                type: string
              name:
                description: Name of the tunnel resource
                type: string
            required:
            - kind
            - name
            type: object
        required:
        - subjects
        - tunnelRef
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
